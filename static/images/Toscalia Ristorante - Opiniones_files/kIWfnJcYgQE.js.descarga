if (self.CavalryLogger) { CavalryLogger.start_js(["vLq2f"]); }

__d("HostnameRewriter",["URI","isFacebookURI","lowerFacebookDomain"],(function(a,b,c,d,e,f){__p&&__p();var g,h=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},i=null,j=null,k=new RegExp("^(.*(?:channel-proxy|edge-chat).*)\\.(facebook\\.com)$","i"),l=new RegExp("facebook\\.com$"),m=new RegExp("^www\\.(|.*\\.)facebook\\.com$"),n=null,o="facebook.com",p=!1,q=!1,r=new RegExp("facebookcorewwwi\\.onion$"),s=new RegExp("facebookcorewwwi\\.testonion$"),t=new RegExp("fbcdn\\.net$"),u="fbcdn23dssr3jqnq.onion",v="fbcdn23dssr3jqnq.testonion",w=new RegExp("^www\\."),x=new RegExp("(^|\\.)(facebook\\.com|workplace\\.com)$","i");function y(a){i=null;a?a="(^|\\.)":a="^";n=a+h(o)+"$";j=null}function z(){if(n==null)return null;if(i)return i;i=new RegExp(n,"i");return i}function A(){if(j)return j;j=new RegExp("(^|\\.)("+h(o)+"|facebook\\.com)$","i");return j}function B(){return function(a){a=new(g||(g=b("URI")))(a);var c=k.exec(a.getDomain());if(!c||c.length<3)return a;a.setDomain("edge-chat."+c[2]);return a}}function C(){return function(a){a=new(g||(g=b("URI")))(a);A().test(a.getDomain())&&a.setProtocol("https");return a}}function D(){return function(a){a=new(g||(g=b("URI")))(a);var c=a.getDomain();A().test(c)&&o!=null?a.setDomain(c.replace(l,o)):p&&c!==null?a.setDomain(c.replace(t,u)):q&&c!==null&&a.setDomain(c.replace(t,v));return a}}function E(){return function(a){a=new(g||(g=b("URI")))(a);var c=a.getDomain();m.test(c)&&a.setDomain(c.replace(w,"web."));return a}}a={registerFacebookFilters:function(a,c){o=a,p=o!=null&&r.test(o),q=o!=null&&s.test(o),y(c),b("isFacebookURI").setRegex(z()),(g||(g=b("URI"))).registerFilter(B()),g.registerFilter(C()),g.registerFilter(D()),b("lowerFacebookDomain").setDomain(o)},registerInternetDotOrgFilters:function(a,c){o=a,(g||(g=b("URI"))).registerFilter(E())},treatWorkplaceAsFacebookURI:function(){b("isFacebookURI").setRegex(x)}};e.exports=a}),null);
__d("AjaxError",[],(function(a,b,c,d,e,f){a={ERROR:"ar:error",TIMEOUT:"ar:timeout",PROXY_ERROR:"ar:proxy error",TRANSPORT_ERROR:"ar:transport error",SERVER_ERROR:"ar:http error",PARSE_ERROR:"ar:parse error",SERVICE_UNAVAILABLE:"ar:noservice"};e.exports=a}),null);
__d("AjaxRequest",["AjaxError","ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","clearTimeout","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i,j=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest(),k=[];function a(){var a=k;k=[];a.forEach(function(a){return a.abort()})}function l(a){a.onJSON=a.onError=a.onSuccess=null,b("clearTimeout")(a._timer),a.xhr&&a.xhr.readyState<4&&(a.xhr.abort(),a.xhr=null),k=k.filter(function(b){return b&&b!=a&&b.xhr&&b.xhr.readyState<4})}c=function(){"use strict";__p&&__p();function a(a,c,d){this.timeout=6e4,this.streamMode=!0,this.prelude=/^for \(;;\);/,this.status=null,this.$1=-1,this.$2=null,this.$3=0,this.$4=null,this.json=null,this.errorType=null,this.errorText=null,this.onJSON=null,this.onSuccess=null,this.onError=null,c instanceof(g||(g=b("URI")))||(c=new(g||(g=b("URI")))(c)),this.xhr=b("ZeroRewrites").getTransportBuilderForURI(c)(),d&&a=="GET"&&c.setQueryData(d),this.method=a,this.uri=c,this.xhr.open(a,b("killswitch")("ASYNC_REQUEST_STRINGIFY_URI_BEFORE_PASSING_TO_OPEN_METHOD")?c:c.toString())}a.supportsCORS=function(){return j};var c=a.prototype;c.send=function(a){__p&&__p();var c=this,d=b("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=function(){return c.$5(d)};var e=this.timeout;e&&(this.$2=b("setTimeoutAcrossTransitions")(function(){c.errorType=b("AjaxError").TIMEOUT,c.errorText="timeout",c.$4=Date.now()-c.$3,c.onError&&c.onError(c),l(c)},e));k.push(this);this.method=="POST"&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.$3=Date.now();this.xhr.send(a?(h||(h=b("PHPQuerySerializer"))).serialize(a):"")};c.abort=function(){l(this)};c.toString=function(){var a="[AjaxRequest readyState="+this.xhr.readyState;this.errorType&&(a+=" errorType="+this.errorType,this.errorText&&(a+=" ("+this.errorText+")"));return a+"]"};c.toJSON=function(){var a={};this.json&&(a.json=this.json);this.status&&(a.status=this.status);this.errorType&&(a.errorType=this.errorType,a.uri=this.uri);this.errorText&&(a.errorText=this.errorText);this.$4&&(a.time=this.$4);return a};c.onJSONSafe=function(){this.onJSON&&this.onJSON(this)};c.onSuccessSafe=function(){this.onSuccess&&this.onSuccess(this)};c.onErrorSafe=function(){this.onError&&this.onError(this)};c.$6=function(){__p&&__p();var a;try{this.status=this.xhr.status,a=this.xhr.statusText}catch(a){this.xhr.readyState>=4&&(this.errorType=b("AjaxError").TRANSPORT_ERROR,this.errorText=a.message);return}var c=this.status;if(c==null){this.errorType=b("AjaxError").ERROR;this.errorText="null status code";return}if(c===0&&!/^(file|ftp)/.test(this.uri.toString()))this.errorType=b("AjaxError").TRANSPORT_ERROR;else if(c>=100&&c<200)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=200&&c<300)return;else if(c>=300&&c<400)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=400&&c<500)this.errorType=b("AjaxError").SERVER_ERROR;else if(c===503)this.errorType=b("AjaxError").SERVICE_UNAVAILABLE;else if(c>500&&c<600)this.errorType=b("AjaxError").PROXY_ERROR;else if(c==1223)return;else c>=12001&&c<=12156?this.errorType=b("AjaxError").TRANSPORT_ERROR:(a="unrecognized status code: "+c,this.errorType=b("AjaxError").ERROR);this.errorText||(this.errorText=a)};c.$7=function(){__p&&__p();var a,c=this.xhr.readyState;try{a=this.xhr.responseText||""}catch(a){c>=4&&(this.errorType=b("AjaxError").ERROR,this.errorText="responseText not available - "+a.message);return}while(this.xhr){var d=this.$1+1,e=this.streamMode?a.indexOf("\n",d):a.length;e<0&&c==4&&(e=a.length);if(e<=this.$1)break;var f=a;this.streamMode&&(f=a.substr(d,e-d).replace(/^\s*|\s*$/g,""));if(d===0&&this.prelude){var g=this.prelude;g.test(f)&&(f=f.replace(g,""))}this.$1=e;if(f){try{this.json=JSON.parse(f)}catch(c){g=a.match(/(<body[\S\s]+?<\/body>)/i);e=g!=null&&g.length>0?g[0]:null;g={message:c.message,"char":d,excerpt:(d===0&&e||f).substr(512)};this.errorType=b("AjaxError").PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(g);return}(i||(i=b("ErrorUtils"))).applyWithGuard(this.onJSONSafe,this)}}};c.$5=function(a){var b=this,c=this.xhr&&this.xhr.readyState||0;this.status==null&&c>=2&&this.$6();!this.errorType&&this.status!=null&&((c===3&&this.streamMode||c===4)&&a(function(){return b.$7()}));(this.errorType||c===4)&&(this.$4=Date.now()-this.$3,a.last(function(){b.errorType?b.onErrorSafe():b.onSuccessSafe(),l(b)}))};return a}();window.addEventListener&&b("UserAgent_DEPRECATED").firefox()&&window.addEventListener("keydown",function(a){a.keyCode===b("Keys").ESC&&a.prevent()},!1);window.attachEvent&&window.attachEvent("onunload",a);e.exports=c}),null);
__d("NotificationBeeperConst",["keyMirror"],(function(a,b,c,d,e,f){a={IDLE_DELAY:1e4,ACTIVE_DELAY_LONG:4e3,FADE_OUT_LENGTH:1500,BeepStates:b("keyMirror")({PENDING:!0,RENDERED:!0,READY_TO_HIDE:!0,FADING_OUT:!0})};e.exports=a}),null);
__d("MediaStream",[],(function(a,b,c,d,e,f){e.exports=window.MediaStream||window.webkitMediaStream}),null);
__d("MercuryFilters.re",["MercuryFilters.bs"],(function(a,b,c,d,e,f){__p&&__p();c=(a=b("MercuryFilters.bs")).all;f.all=c;d=a.unread;f.unread=d;e=a.groups;f.groups=e;b=a.named;f.named=b;c=a.unnamed;f.unnamed=c;d=a.getSupportedFilters;f.getSupportedFilters=d;e=a.isSupportedFilter;f.isSupportedFilter=e}),null);
__d("FavIcon",["DOM"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i;function j(){var a=b("DOM").scry(document.head,"link");a&&a.forEach(function(a){(a.rel.indexOf("icon")!=-1||a.rel.indexOf("shortcut icon")!=-1)&&b("DOM").remove(a)})}a={isToggledResource:function(){return i&&g instanceof HTMLLinkElement&&g.href===i?!0:!1},set:function(a){g&&b("DOM").remove(g),j(),g=b("DOM").create("link",{type:"image/x-icon",rel:"icon",href:a}),b("DOM").appendContent(b("DOM").find(document,"head"),g)},setToggleResources:function(a,b){g=document.querySelector('link[rel*=icon][href*=".ico"]'),g instanceof HTMLLinkElement&&(h=b!=null?b:g.href,i=a)},toggle:function(){if(!g||!i)return;if(g.href===h){this.set(i);return}this.set(h)},toggleSet:function(a){if(!g||!i||!h)return;a=a?i:h;g.href!==a&&this.set(a)}};e.exports=a}),null);
__d("WorkGalahadDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.dispatch=c.dispatch.bind(babelHelpers.assertThisInitialized(c)),b)||babelHelpers.assertThisInitialized(c)}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("NotificationSound",["Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3;b("Sound").init(["audio/mpeg"]);function a(a){this._soundPath=a,this._lastPlayed=0}Object.assign(a.prototype,{play:function(a){if(!this._soundPath)return;var c=Date.now();if(c-this._lastPlayed<g)return;this._lastPlayed=c;b("Sound").playOnlyIfImmediate(this._soundPath,a,!1)}});e.exports=a}),null);
__d("Currency",["CurrencyConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrencyConfig").allCurrenciesByCode,h={iso:"",format:"",symbol:"",offset:1,name:""};function i(a){return a!=null&&g[a]?g[a]:h}function a(a){return i(a).format}function c(a){return i(a).iso}function d(a){return i(a).name}function f(a){return i(a).offset}function j(a){return i(a).symbol}e.exports={getFormat:a,getISO:c,getName:d,getOffset:f,getSymbol:j}}),null);
__d("randomShuffle",["randomInt"],(function(a,b,c,d,e,f){__p&&__p();function a(a){for(var c=a.length-1;c>0;c--){var d=b("randomInt").call(this,c+1);if(d!=c){var e=a[d];a[d]=a[c];a[c]=e}}return a}e.exports=a}),null);
__d("XMessengerDotComMainController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/t/{?thread_key}/",{thread_key:{type:"String"},folder_key:{type:"String"},mid:{type:"String"},ref:{type:"String"},messaging_source:{type:"Enum",enumType:1},game:{type:"String"},source:{type:"Enum",enumType:1},source_id:{type:"String"},subchannel:{type:"String"},redirect_source:{type:"Enum",enumType:1}})}),null);